0a541cfb9181a9b8dac3076287d56fe5
const request = require('supertest');

const app = require('../app');

const Event = require('../server/models').event;

const Sequelize = require('sequelize');

const Op = Sequelize.Op;
/*
Supported POST bodies
*/

const userEntersRoom = {
  "date": "1985­10­26T09:00:00Z",
  "user": "Doc",
  "type": "enter"
};
const userCommentsInARoom = {
  "date": "1985­10­27T09:01:00Z",
  "user": "Doc",
  "type": "comment",
  "message": "I love plutonium"
};
const userHighFivesAnotherUser = {
  "date": "1985­10­28T09:02:00Z",
  "user": "Marty",
  "type": "highfive",
  "otheruser": "Doc"
};
const userLeavesRoom = {
  "date": "1985­10­29T09:03:00Z",
  "user": "Doc",
  "type": "leave"
};
describe('Events API', () => {
  describe('creating events', () => {
    it('the events route responds to a POST with a user enters event', done => {
      request(app).post('/events').send(userEntersRoom).expect(200).end((err, res) => {
        expect(err).toBeNull();
        expect(res.body).toHaveProperty('status', 'ok');
        done();
      });
    });
    it('the events route responds to a POST with a user comments event', done => {
      request(app).post('/events').send(userCommentsInARoom).expect(200).end((err, res) => {
        expect(err).toBeNull();
        expect(res.body).toHaveProperty('status', 'ok');
        done();
      });
    });
    it('the events route responds to a POST with a user high five event', done => {
      request(app).post('/events').send(userHighFivesAnotherUser).expect(200).end((err, res) => {
        expect(err).toBeNull();
        expect(res.body).toHaveProperty('status', 'ok');
        done();
      });
    });
    it('the events route responds to a POST with a user leaves event', done => {
      request(app).post('/events').send(userLeavesRoom).expect(200).end((err, res) => {
        expect(err).toBeNull();
        expect(res.body).toHaveProperty('status', 'ok');
        done();
      });
    });
  });
  describe('listing events', () => {
    it('the events route will get a listing of events', done => {
      Event.findAll({
        where: {
          date: {
            [Op.lt]: '1985­10­26T09:00:00Z',
            [Op.gt]: '1985­10­29T09:03:00Z'
          }
        }
      }).then(events => {
        request(app).get('/events').send('from=1985­10­26T09:00:00Z&to=1985­10­29T09:03:00Z').expect(200).end((err, res) => {
          expect(err).toBeNull();
          expect(res.body).toEqual(events);
          done();
        });
      });
    });
  });
  describe('summary events', () => {
    it('the events route responds to a POST with a user enters event', done => {
      request(app).post('/events').send(userEntersRoom).expect(200).end((err, res) => {
        expect(err).toBeNull();
        expect(res.body).toHaveProperty('status', 'ok');
        done();
      });
    });
  });
  describe('clearing events', () => {
    it('clears data in db when posting to events clear route', done => {
      request(app).post('/events/clear').expect(200).end((err, res) => {
        expect(err).toBeNull();
        expect(res.body).toHaveProperty('status', 'ok');
        done();
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5zcGVjLmpzIl0sIm5hbWVzIjpbInJlcXVlc3QiLCJyZXF1aXJlIiwiYXBwIiwiRXZlbnQiLCJldmVudCIsIlNlcXVlbGl6ZSIsIk9wIiwidXNlckVudGVyc1Jvb20iLCJ1c2VyQ29tbWVudHNJbkFSb29tIiwidXNlckhpZ2hGaXZlc0Fub3RoZXJVc2VyIiwidXNlckxlYXZlc1Jvb20iLCJkZXNjcmliZSIsIml0IiwiZG9uZSIsInBvc3QiLCJzZW5kIiwiZXhwZWN0IiwiZW5kIiwiZXJyIiwicmVzIiwidG9CZU51bGwiLCJib2R5IiwidG9IYXZlUHJvcGVydHkiLCJmaW5kQWxsIiwid2hlcmUiLCJkYXRlIiwibHQiLCJndCIsInRoZW4iLCJldmVudHMiLCJnZXQiLCJ0b0VxdWFsIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFELENBQXZCOztBQUNBLE1BQU1DLEdBQUcsR0FBR0QsT0FBTyxDQUFFLFFBQUYsQ0FBbkI7O0FBQ0EsTUFBTUUsS0FBSyxHQUFHRixPQUFPLENBQUMsa0JBQUQsQ0FBUCxDQUE0QkcsS0FBMUM7O0FBQ0EsTUFBTUMsU0FBUyxHQUFHSixPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUFDQSxNQUFNSyxFQUFFLEdBQUdELFNBQVMsQ0FBQ0MsRUFBckI7QUFFQTs7OztBQUdBLE1BQU1DLGNBQWMsR0FBRztBQUFDLFVBQVEsc0JBQVQ7QUFBaUMsVUFBUSxLQUF6QztBQUFnRCxVQUFRO0FBQXhELENBQXZCO0FBRUEsTUFBTUMsbUJBQW1CLEdBQUc7QUFBQyxVQUFRLHNCQUFUO0FBQWlDLFVBQVEsS0FBekM7QUFBZ0QsVUFBUSxTQUF4RDtBQUFtRSxhQUFXO0FBQTlFLENBQTVCO0FBRUEsTUFBTUMsd0JBQXdCLEdBQUc7QUFBQyxVQUFRLHNCQUFUO0FBQWlDLFVBQVEsT0FBekM7QUFBa0QsVUFBUSxVQUExRDtBQUFzRSxlQUFhO0FBQW5GLENBQWpDO0FBRUEsTUFBTUMsY0FBYyxHQUFHO0FB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LENBQVAsQ0FDQ1ksSUFERCxDQUNNLGVBRE4sRUFFQ0UsTUFGRCxDQUVRLEdBRlIsRUFHQ0MsR0FIRCxDQUdLLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ2pCSCxRQUFBQSxNQUFNLENBQUNFLEdBQUQsQ0FBTixDQUFZRSxRQUFaO0FBQ0FKLFFBQUFBLE1BQU0sQ0FBQ0csR0FBRyxDQUFDRSxJQUFMLENBQU4sQ0FBaUJDLGNBQWpCLENBQWdDLFFBQWhDLEVBQTBDLElBQTFDO0FBQ0FULFFBQUFBLElBQUk7QUFDTCxPQVBEO0FBUUQsS0FUQyxDQUFGO0FBVUQsR0FYTyxDQUFSO0FBWUQsQ0FuR08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IGFwcCA9IHJlcXVpcmUgKCcuLi9hcHAnKTtcbmNvbnN0IEV2ZW50ID0gcmVxdWlyZSgnLi4vc2VydmVyL21vZGVscycpLmV2ZW50O1xuY29uc3QgU2VxdWVsaXplID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5jb25zdCBPcCA9IFNlcXVlbGl6ZS5PcDtcblxuLypcblN1cHBvcnRlZCBQT1NUIGJvZGllc1xuKi9cbmNvbnN0IHVzZXJFbnRlcnNSb29tID0ge1wiZGF0ZVwiOiBcIjE5ODXCrTEwwq0yNlQwOTowMDowMFpcIiwgXCJ1c2VyXCI6IFwiRG9jXCIsIFwidHlwZVwiOiBcImVudGVyXCJ9O1xuXG5jb25zdCB1c2VyQ29tbWVudHNJbkFSb29tID0ge1wiZGF0ZVwiOiBcIjE5ODXCrTEwwq0yN1QwOTowMTowMFpcIiwgXCJ1c2VyXCI6IFwiRG9jXCIsIFwidHlwZVwiOiBcImNvbW1lbnRcIiwgXCJtZXNzYWdlXCI6IFwiSSBsb3ZlIHBsdXRvbml1bVwifTtcblxuY29uc3QgdXNlckhpZ2hGaXZlc0Fub3RoZXJVc2VyID0ge1wiZGF0ZVwiOiBcIjE5ODXCrTEwwq0yOFQwOTowMjowMFpcIiwgXCJ1c2VyXCI6IFwiTWFydHlcIiwgXCJ0eXBlXCI6IFwiaGlnaGZpdmVcIiwgXCJvdGhlcnVzZXJcIjogXCJEb2NcIn07XG5cbmNvbnN0IHVzZXJMZWF2ZXNSb29tID0ge1wiZGF0ZVwiOiBcIjE5ODXCrTEwwq0yOVQwOTowMzowMFpcIiwgXCJ1c2VyXCI6IFwiRG9jXCIsIFwidHlwZVwiOiBcImxlYXZlXCJ9O1xuXG5kZXNjcmliZSgnRXZlbnRzIEFQSScsICgpID0+IHtcbiAgZGVzY3JpYmUoICdjcmVhdGluZyBldmVudHMnLCAoKSA9PiB7XG4gICAgaXQoICd0aGUgZXZlbnRzIHJvdXRlIHJlc3BvbmRzIHRvIGEgUE9TVCB3aXRoIGEgdXNlciBlbnRlcnMgZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgcmVxdWVzdChhcHApXG4gICAgICAucG9zdCgnL2V2ZW50cycpXG4gICAgICAuc2VuZCh1c2VyRW50ZXJzUm9vbSlcbiAgICAgIC5leHBlY3QoMjAwKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgZXhwZWN0KGVycikudG9CZU51bGwoKTtcbiAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJywgJ29rJyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCAndGhlIGV2ZW50cyByb3V0ZSByZXNwb25kcyB0byBhIFBPU1Qgd2l0aCBhIHVzZXIgY29tbWVudHMgZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvZXZlbnRzJylcbiAgICAgICAgLnNlbmQodXNlckNvbW1lbnRzSW5BUm9vbSlcbiAgICAgICAgLmV4cGVjdCgyMDApXG4gICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KGVycikudG9CZU51bGwoKTtcbiAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdzdGF0dXMnLCAnb2snKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCAndGhlIGV2ZW50cyByb3V0ZSByZXNwb25kcyB0byBhIFBPU1Qgd2l0aCBhIHVzZXIgaGlnaCBmaXZlIGV2ZW50JywgKGRvbmUpID0+IHtcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2V2ZW50cycpXG4gICAgICAgIC5zZW5kKHVzZXJIaWdoRml2ZXNBbm90aGVyVXNlcilcbiAgICAgICAgLmV4cGVjdCgyMDApXG4gICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KGVycikudG9CZU51bGwoKTtcbiAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdzdGF0dXMnLCAnb2snKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCAndGhlIGV2ZW50cyByb3V0ZSByZXNwb25kcyB0byBhIFBPU1Qgd2l0aCBhIHVzZXIgbGVhdmVzIGV2ZW50JywgKGRvbmUpID0+IHtcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2V2ZW50cycpXG4gICAgICAgIC5zZW5kKHVzZXJMZWF2ZXNSb29tKVxuICAgICAgICAuZXhwZWN0KDIwMClcbiAgICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgICBleHBlY3QoZXJyKS50b0JlTnVsbCgpO1xuICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycsICdvaycpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCAnbGlzdGluZyBldmVudHMnLCAoKSA9PiB7XG4gICAgaXQoICd0aGUgZXZlbnRzIHJvdXRlIHdpbGwgZ2V0IGEgbGlzdGluZyBvZiBldmVudHMnLCAoZG9uZSkgPT4ge1xuICAgICAgRXZlbnRcbiAgICAgICAgLmZpbmRBbGwoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBkYXRlOiB7XG4gICAgICAgICAgICAgIFtPcC5sdF06ICcxOTg1wq0xMMKtMjZUMDk6MDA6MDBaJyxcbiAgICAgICAgICAgICAgW09wLmd0XTogJzE5ODXCrTEwwq0yOVQwOTowMzowMFonXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoZXZlbnRzKSA9PiB7XG4gICAgICAgICAgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAuZ2V0KCcvZXZlbnRzJylcbiAgICAgICAgICAgIC5zZW5kKCdmcm9tPTE5ODXCrTEwwq0yNlQwOTowMDowMFomdG89MTk4NcKtMTDCrTI5VDA5OjAzOjAwWicpXG4gICAgICAgICAgICAuZXhwZWN0KDIwMClcbiAgICAgICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICAgIGV4cGVjdChlcnIpLnRvQmVOdWxsKCk7XG4gICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG9FcXVhbChldmVudHMpO1xuICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoICdzdW1tYXJ5IGV2ZW50cycsICgpID0+IHtcbiAgICBpdCggJ3RoZSBldmVudHMgcm91dGUgcmVzcG9uZHMgdG8gYSBQT1NUIHdpdGggYSB1c2VyIGVudGVycyBldmVudCcsIChkb25lKSA9PiB7XG4gICAgICByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9ldmVudHMnKVxuICAgICAgICAuc2VuZCh1c2VyRW50ZXJzUm9vbSlcbiAgICAgICAgLmV4cGVjdCgyMDApXG4gICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KGVycikudG9CZU51bGwoKTtcbiAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdzdGF0dXMnLCAnb2snKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSggJ2NsZWFyaW5nIGV2ZW50cycsICgpID0+IHtcbiAgICBpdCgnY2xlYXJzIGRhdGEgaW4gZGIgd2hlbiBwb3N0aW5nIHRvIGV2ZW50cyBjbGVhciByb3V0ZScsIChkb25lKSA9PiB7XG4gICAgICByZXF1ZXN0KGFwcClcbiAgICAgIC5wb3N0KCcvZXZlbnRzL2NsZWFyJylcbiAgICAgIC5leHBlY3QoMjAwKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgZXhwZWN0KGVycikudG9CZU51bGwoKTtcbiAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJywgJ29rJyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4iXX0=